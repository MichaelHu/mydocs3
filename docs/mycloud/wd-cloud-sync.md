# wd-cloud-sync

> 用于WD家庭个人云服务器间的数据同步的小工具

github: <https://github.com/MichaelHu/wd-cloud-sync>

## 实现

主要看github吧，`README.md`和`sync.sh`

另外，在`linuxshell.md`中也分散着说了不少，`scp`、`awk`等的深度使用。


## 感悟

> 整个过程，`感悟颇多`。

晚上10点回家后，觉得两个WD服务器总是用得不顺手，坐下来敲了几行命令后，深入进去，后来竟搞了个通宵，第二天又不断进行调优，最终达到阶段性可用状态。

最终的成品，还是蛮有成就感，至少家庭个人云是建立起来了，代码有点意思，也就放到github了。

个人感觉，做这个小工具：

* 有强烈的想做得更好的诉求
* 一步一步开始以后就停不下来，好比追剧，欲罢不能

延伸到其他，我们做一件事情，强烈诉求何尝不是一种`超强催化剂`。


### 不断试错

> 坑不少

* `中文显示`问题（`export LC_ALL=zh_CN.UTF-8`）
* scp的`远程路径`
* for命令中路径带`空格等特殊字符`的处理


### 不让不爽滋生

> 不厌其烦地`不断改进`，不让不爽之处有生存空间

* 手敲命令模式 -> `工具脚本`文件模式
* `大量`测试`验证`，解决scp远程路径问题
* `增量同步`的实现，深度使用awk命令
* `PREFIX`多次优化，默认 -> 预置 -> 自动生成
* 多套脚本 -> 单个脚本，支持参数输入
* 参数输入，绝对路径 -> 支持相对路径
* 盲目等待 -> 进度反馈 -> 异常捕获

    
### shell相关 

* 使用变量，如果变量为空时，不提示错误，这给整个程序的调试带来麻烦。这需要及时echo验证
* 有`side effect`的命令，先echo出命令内容，步步为营
* 大批量side effect命令执行前，可以设置`MAX_COUNT`值，先观察部分集合的运行效果


