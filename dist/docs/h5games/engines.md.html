<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/bootstrap/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/css/markdown-7.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/css/nav.css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <style type="text/css">
        body {padding: 15px;}
        img {max-width: 100%; border: 1px solid #eee; }
        pre, code {color: #048ebd; }
        li>p {display: block;}
        p>code, li>code {padding:0; font-size: 13px; color: red;}
    </style>
    <script type="text/javascript" src="/docs/markdown_res/js/jquery-1.9.1.js"></script>
</head>
<body>
    <div id="nav">
<a href="javascript:history.back()">返回 [ or Backspace ]</a>
    </div>

<h1> h5游戏引擎</h1>
<h2> 关键词</h2>
<p>stage
scene
sprites
sheet
shape</p>
<p>keyboardcontrol
joypadcontrol</p>
<p>gravityX
gravityY</p>
<p>collision
bump
collisionMask</p>
<p>load(resources, callback);</p>


<h2> Quintus</h2>
<blockquote><p> HTML5 Game Engine</p></blockquote><ul><li>官网：<a href="http://www.html5quintus.com">http://www.html5quintus.com</a></li>
<li>GIT: <a href="https://github.com/cykod/Quintus">https://github.com/cykod/Quintus</a></li></ul>
<h3> 初始化部分：</h3>
<pre><code>var Q = window.Q = Quintus({audioSupported: [ 'wav','mp3','ogg' ]})
        .include("Sprites, Scenes, Input, 2D, Anim, Touch, UI, TMX, Audio")
        // Maximize this game to whatever the size of the browser is
        .setup({ maximize: true })
        // And turn on default input controls and touch input (for UI)
        .controls(true).touch()
        // Enable sounds.
        .enableSound(); </code></pre>
<h3> 模块与组件</h3>
<blockquote><p> core＋extend modules的方式，分布在以下文件中。包含模块使用Q.include方式。包含组件使用this.add方式。</p></blockquote><pre><code>quintus.js
quintus_2d.js
quintus_anim.js
quintus_audio.js
quintus_input.js
quintus_scenes.js
quintus_sprites.js
quintus_tmx.js
quintus_touch.js
quintus_ui.js  </code></pre>
<p>包含模块列出如下：</p>
<h4> 1. 2D</h4>
<p>包含组件：</p>
<ul><li>viewport</li>
<li>2d</li>
<li>aiBounce</li></ul>
<p>扩展Q.Sprite类：</p>
<ul><li>TileLayer </li></ul>
<p>扩展Q：</p>
<ul><li>Q.gravityX = 9.8 * 100</li>
<li>Q.gravityY</li></ul>
<h4> 2. Anim </h4>
<p>包含组件：</p>
<ul><li>animation</li>
<li>tween</li></ul>
<p>扩展Q.Sprite类：</p>
<ul><li>Repeater </li></ul>
<p>扩展Q：</p>
<ul><li>Q.animations</li>
<li>Q.animation</li>
<li>Q.Easing</li>
<li>Q.Tween = Q.Class.extend(...</li></ul>
<h4> 3. Audio</h4>
<p>扩展Q：</p>
<ul><li>Q.audio</li>
<li>Q.hasWebAudio</li>
<li>Q.enableSound</li></ul>
<h4> 4. Input</h4>
<p>包含组件：</p>
<ul><li>platformerControls</li>
<li>stepControls</li></ul>
<p>扩展Q：</p>
<ul><li>Q.KEY_NAMES</li>
<li>Q.inputs</li>
<li>Q.joypad</li>
<li>Q.canvasToStageX</li>
<li>Q.canvasToStageY</li>
<li>Q.InputSystem </li>
<li>Q.controls</li></ul>
<h4> 5. Scenes</h4>
<p>扩展Q：</p>
<ul><li>Q.Scene = Q.Class.extend(...</li>
<li>Q.scene()</li>
<li>Q.collision</li>
<li>Q.overlap</li>
<li>Q.Stage = Q.GameObject.extend({...});</li>
<li>Q.activeStage</li>
<li>Q.StageSelector = Q.Class.extend(...);</li>
<li>Q.select</li>
<li>Q.stage</li>
<li>Q.stageScene</li>
<li>Q.stageGameLoop</li>
<li>Q.clearStage</li>
<li>Q.clearStages</li></ul>
<h4> 6. Sprites</h4>
<p>扩展类：</p>
<ul><li>SpriteSheet = Q.Class.extend(...) </li>
<li>Sprite = Q.GameObject.extend(...) <p>Sprite.draw:</p>
<pre><code>...
draw: function(ctx) {
  var p = this.p;
  if(p.sheet) {
    this.sheet().draw(ctx,-p.cx,-p.cy,p.frame);
  } else if(p.asset) {
    ctx.drawImage(Q.asset(p.asset),-p.cx,-p.cy);
  } else if(p.color) {
    ctx.fillStyle = p.color;
    ctx.fillRect(-p.cx,-p.cy,p.w,p.h);
  }
},
... </code></pre>
</li></ul>
<p>扩展Sprite类：</p>
<ul><li>MovingSprite</li></ul>
<p>扩展Q：</p>
<ul><li>Q.sheets = {...};</li>
<li>Q.sheet</li>
<li>Q.compileSheets</li>
<li>常量：<ul><li>Q.SPRITE_NONE</li>
<li>Q.SPRITE_DEFAULT</li>
<li>Q.SPRITE_PARTICLE</li>
<li>Q.SPRITE_ACTIVE</li>
<li>Q.SPRITE_FRIENDLY</li>
<li>Q.SPRITE_ENEMY</li>
<li>Q.SPRITE_POWERUP</li>
<li>Q.SPRITE_UI</li>
<li>Q.SPRITE_ALL</li></ul>
</li>
<li>Q._generatePoints</li>
<li>Q._generateCollisionPoints</li></ul>
<h4> 7. TMX</h4>

<p>扩展Q：</p>
<ul><li>Q.loadAssetTMX</li>
<li>Q._tmxEtractAssetName</li>
<li>Q._tmxExtractSources</li>
<li>Q.loadTMX</li>
<li>Q._tmxLoadTilesets </li>
<li>Q._tmxProcessImageLayer</li>
<li>Q._lookuoGid</li>
<li>Q._tmxProcessTileLayer</li>
<li>Q._tmxProcessObjectLayer</li>
<li>Q._tmxProcessors = {...}</li>
<li>Q.stageTMX</li></ul>
<h4> 8. Touch</h4>
<p>扩展类：</p>
<ul><li>Q.Evented.extend('TouchSystem', ...)</li></ul>
<p>扩展Q：</p>
<ul><li>Q.touch</li>
<li>Q.untouch</li></ul>
<h4> 9. UI</h4>

<p>包含组件：</p>
<ul><li>viewport</li>
<li>2d</li>
<li>aiBounce</li>
<li>tween</li></ul>
<p>扩展Q.Sprite类：</p>
<ul><li>TileLayer </li></ul>
<p>扩展Q：</p>
<ul><li>Q.UI.roundRect</li>
<li>Q.UI.Container</li>
<li>Q.UI.Text</li>
<li>Q.UI.Button</li>
<li>Q.UI.IFrame</li>
<li>Q.UI.HTMLElement</li>
<li>Q.UI.VerticalLayout</li></ul>
<h3> 类层次</h3>
<ul><li>Q.Class<ul><li>Q.Evented<ul><li>Q.Component</li>
<li>Q.GameObject<ul><li>Q.GameState</li>
<li>Q.Sprite<ul><li>Q.MovingSprite</li></ul>
</li></ul>
</li></ul>
</li>
<li>Q.Matrix2D</li>
<li>Q.SpriteSheet</li></ul>
</li></ul>
<h3> 关键类</h3>
<ul><li>Q.Matrix2D<ul><li>init</li>
<li>identity </li>
<li>clone(matrix)</li>
<li>multiply(matrix)</li>
<li>rotate(radians)</li>
<li>rotateDeg(deg)</li>
<li>scale(sx, sy)</li>
<li>translate(tx, ty)</li>
<li>transform(x, y)</li>
<li>transformPt(obj)</li>
<li>transformArr(inArr, outArr)</li>
<li>transformX(x, y)</li>
<li>transformY(x, y)</li>
<li>release()</li></ul>
</li>
<li>Q.Sprite<ul><li>this._super()<p>调用父类同名函数</p>
</li>
<li>this.add()<p>添加component</p>
</li>
<li>this.animate()<p>动画，添加animation组件以后可调用</p>
</li>
<li>this.play()<p>播放某个预定义动画</p>
</li>
<li>this.destroy()<p>销毁</p>
</li>
<li>this.p: 有哪些预定义属性？<p>x, y, cx, cy, vx, vy, ...</p>
</li></ul>
</li>
<li>Q.Stage<ul><li>this.unfollow()</li>
<li>this.add()</li>
<li>this.follow()</li></ul>
</li></ul>
<h3> 方法</h3>
<ul><li>Q.scene()<p>定义场景</p>
</li>
<li>Q.stageScene()<p>切换场景</p>
</li>
<li>Q.loadTMX()<pre><code>Q.loadTMX("level1.tmx, collectables.json, doors.json, enemies.json, "
    + "fire.mp3, jump.mp3, heart.mp3, hit.mp3, coin.mp3, player.json, player.png"
    , function() {
        Q.compileSheets("player.png","player.json");
        ...
        Q.animations("fly", EnemyAnimations);
        ...
        Q.stageScene("level1"); 
        Q.stageScene('hud', 3, Q('Player').first().p); 
    }
    , {
        progressCallback: function(loaded,total) {
            ...
        }
    }  </code></pre>
</li>
<li>Q.compileSheets()</li>
<li>Q.stageTMX()<p>从.tmx文件中装载场景</p>
<pre><code>Q.stageTMX("level1.tmx",stage);  </code></pre>
</li>
<li>Q.compileSheets()</li>
<li>Q.input.on()<p>添加<code>Input</code>组件以后，可以调用，比如:</p>
<pre><code>Q.input.on("down",this,"checkDoor"); </code></pre>
</li>
<li>Q.audio.play()<p>添加<code>Audio</code>组件以后，可以调用，比如:</p>
<pre><code>Q.audio.play('jump.mp3');   </code></pre>
</li></ul>
<h2> Crafty</h2>
<ul><li>官网：<a href="http://craftyjs.com">http://craftyjs.com</a>，不太容易打开</li>
<li>GIT: <a href="https://github.com/craftyjs/Crafty">https://github.com/craftyjs/Crafty</a></li></ul>
<h2> Egret</h2>
<p>TypeScript编写</p>
<p>围住神经猫</p>

    <script type="text/javascript" src="/docs/markdown_res/bootstrap/js/bootstrap.js"></script>
</body>
</html>
<script type="text/javascript">
(function(){

document.title = $('h1').html() || '技术文档－258i.com';    

$(document).on('keydown', function(e){
    var BACKSPACE = 8,
        SLASH = 191,
        LEFT = 37;

    if ( BACKSPACE == e.keyCode
        || BACKSPACE == e.which
        || LEFT == e.keyCode
        || LEFT == e.which){
        e.preventDefault();
        history.back();
    }
    else if ( SLASH == e.keyCode ) {
        $('#search').focus();
        // prevent search input 
        e.preventDefault();
    }
});

})();
</script>
<script type="text/javascript" src="/docs/markdown_res/js/scrollspy.js"></script>
<script type="text/javascript" src="/docs/markdown_res/bootstrap/js/bootstrap.min.js"></script>
