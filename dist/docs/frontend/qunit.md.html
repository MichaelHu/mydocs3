<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/css/markdown-7.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/css/nav.css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <style type="text/css">
        img {max-width: 100%; border: 1px solid #eee; }
        pre, code {color: #048ebd; }
        li>p {display: block;}
        p>code, li>code {padding:0; font-size: 13px; color: red;}
    </style>
    <script type="text/javascript" src="/docs/markdown_res/js/jquery-1.9.1.js"></script>
</head>
<body>
    <div id="nav">
<a href="javascript:history.back()">返回 [ or Backspace ]</a>
    </div>

<h1> QUnit Memo</h1>
<blockquote><p> js单元测试工具，由jQuery团队开发，也是jQuery的官方测试套装。</p></blockquote><p><a href="http://qunitjs.com/">qunitjs.com</a></p>
<p>npm: <code>npm install --save-dev qunitjs</code></p>
<h2> 一、测试方法</h2>
<p><code>脚手架HTML代码：</code></p>
<pre><code>&lt;!DOCTYPE html>
&lt;html>
&lt;head>
    &lt;title>QUnit Test Suite&lt;/title>
    &lt;link rel="stylesheet" href="http://github.com/jquery/qunit/raw/master/qunit/qunit.css" type="text/css" media="screen">
    &lt;script type="text/javascript" src="http://github.com/jquery/qunit/raw/master/qunit/qunit.js">&lt;/script>
    &lt;!-- Your project file goes here -->
    &lt;script type="text/javascript" src="myProject.js">&lt;/script>
    &lt;!-- Your tests file goes here -->
    &lt;script type="text/javascript" src="myTests.js">&lt;/script>
&lt;/head>
&lt;body>
    &lt;h1 id="qunit-header">QUnit Test Suite&lt;/h1>
    &lt;h2 id="qunit-banner">&lt;/h2>
    &lt;div id="qunit-testrunner-toolbar">&lt;/div>
    &lt;h2 id="qunit-userAgent">&lt;/h2>
    &lt;ol id="qunit-tests">&lt;/ol>
&lt;/body>
&lt;/html> </code></pre>
<ol><li>使用以上脚手架</li>
<li>引入项目js文件和test文件</li>
<li>浏览器中访问</li></ol>
<h2> 二、关键测试方法</h2>
<blockquote><p> test文件中测试用例的写法</p></blockquote><ol><li><code>建立测试用例：</code><pre><code>test(desp, func) </code></pre>
<p>例子如：</p>
<pre><code>// Let's test this function
function isEven(val) {
    return val % 2 === 0;
}

test('isEven()', function() {
    ok(isEven(0), 'Zero is an even number');
    ok(isEven(2), 'So is two');
    ok(isEven(-4), 'So is negative four');
    ok(!isEven(1), 'One is not an even number');
    ok(!isEven(-7), 'Neither is negative seven');
})  </code></pre>
</li>
<li><code>断言类型：</code><pre><code>ok(expr, msg)
equals(expr, expr, msg)
same(expr, expr, msg)
deepEqual(expr, expr, msg)
strictEqual(expr, expr, msg)  </code></pre>
<p><code>equals</code>已经废弃，新版本使用<code>equal</code></p>
<p><code>same</code>已经废弃，新版本使用<code>deepEqual</code></p>
<p>例子如：</p>
<pre><code>test('assertions', function() {
    equal( 2, 1, 'one equals one');
})


test('test', function() {
    deepEqual( {}, {}, 'passes, objects have the same content');
    deepEqual( {a: 1}, {a: 1} , 'passes');
    deepEqual( [], [], 'passes, arrays have the same content');
    deepEqual( [1], [1], 'passes');
})  </code></pre>
</li>
<li><code>结构化你的断言：</code><pre><code>module(desp) </code></pre>
<p>例子如：</p>
<pre><code>module('Module A');
test('a test', function() {});
test('an another test', function() {});

module('Module B');
test('a test', function() {});
test('an another test', function() {});  </code></pre>
</li>
<li><code>异步测试</code>，使用<code>stop()</code>和<code>start()</code>：<pre><code>test('asynchronous test', function() {
    // Pause the test first
    stop();

    setTimeout(function() {
        ok(true);

        // After the assertion has been called,
        // continue the test
        start();
    }, 100)
}) </code></pre>
<p>或者使用<code>asyncTest</code>:</p>
<pre><code>asyncTest('asynchronous test', function() {
    // The test is automatically paused

    setTimeout(function() {
        ok(true);

        // After the assertion has been called,
        // continue the test
        start();
    }, 100)
}) </code></pre>
</li>
<li><code>捕获没有执行的断言</code>，使用<code>expect(num)</code>：<pre><code>// A custom function
function ajax(successCallback) {
    $.ajax({
        url: 'server.php',
        success: successCallback
    });
}

// Tell QUnit that you expect three assertion to run
test('asynchronous test', 3, function() {
    // Pause the test
    stop();

    ajax(function() {
        ok(true);
    })

    ajax(function() {
        ok(true);
        ok(true);
    })

    setTimeout(function() {
        start();
    }, 2000);
})    </code></pre>
</li></ol>

    <script type="text/javascript" src="/docs/markdown_res/bootstrap/js/bootstrap.js"></script>
</body>
</html>
<script type="text/javascript">
(function(){

document.title = $('h1').html() || '技术文档－258i.com';    

$(document).on('keydown', function(e){
    var BACKSPACE = 8,
        LEFT = 37;

    if(BACKSPACE == e.keyCode
        || BACKSPACE == e.which
        || LEFT == e.keyCode
        || LEFT == e.which){
        e.preventDefault();
        history.back();
    }
});

})();
</script>
<script type="text/javascript" src="/docs/markdown_res/js/scrollspy.js"></script>
