<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/bootstrap/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/css/github-markdown.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="/docs/markdown_res/css/page.css" />
    <script type="text/javascript" src="/docs/markdown_res/js/jquery-1.9.1.min.js"></script>
    <style type="text/css">

    </style>

</head>
<body class="markdown-body">
    <div id="nav" class="row">
<a class="text-info pull-right" href="javascript:history.back()">Back</a>
    </div>

<h1> Cookie备忘</h1>

<blockquote><p> Cookie使用需谨慎，保持短小精悍</p></blockquote>

<h2> 1 容量限制</h2>
<p><code>4k</code> Bytes</p>


<h2> 2 读取cookie</h2>
<p><code>document.cookie</code>，返回当前域名（包括父级域名）的cookie串。</p>
<p>cookie串由<code>'; '</code>分隔每个cookie，每个cookie按<code>name=value</code>的方式保存。如下格式：</p>
<pre><code>name1=value1; name2=value2; name3=value3 </code></pre>
<p>示例代码：</p>
<pre><code>var cookie = document.cookie;
output: 
    name=test; name1=test1; name2=test2 </code></pre>
<p>读取时，只有<code>name=&lt;value></code>部分，不会包含其他cookie属性字段。每个cookie以<code>'; '</code>分隔。</p>


<h3> 2.1 cookie的属性</h3>
<p>通常为4个属性，格式如下：</p>
<pre><code>name=&lt;value>[; expires=&lt;date>][; domain=&lt;domain>][; path=&lt;path>][; secure]  </code></pre>
<p>带有第五个属性<code>HttpOnly</code>的cookie，可以有效防止XSS攻击，阻止浏览器将cookie信息传送给第三方。</p>
<pre><code>name=&lt;value>[; expires=&lt;date>][; domain=&lt;domain>][; path=&lt;path>][; secure][; HttpOnly]     </code></pre>
<h3> 2.2 属性默认值</h3>
<ul><li><code>domain</code>，默认为<code>location.hostname</code>，而不是location.host</li>
<li><code>path</code>，默认为当前路径，比如当前为<code>/static/abc/d.html</code>，则path为<code>/static/abc</code>。路径不存在，cookie设置不成功</li>
<li><code>expires</code>，默认为当前session有效</li></ul>
<h2> 3 设置cookie</h2>

<p>示例代码：</p>
<pre><code>document.cookie = 'name=test; expires=' + date.toGMTString() 
    + '; domain=' + domain
    + '; path=' + path
    + '; secure'
    ;    </code></pre>
<h2> 4 路径和域名属性</h2>

<h3> 4.1 父路径</h3>
<p>子路径能获取父路径下的cookie，比如<code>/static/abc</code>下，能获取path为<code>/static</code>的cookie。反之则不行</p>

<h3> 4.2 父域名</h3>
<p>同父路径类似，子域名能获取父域名下的cookie，反之则不行</p>


<h2> 5 跨域cookie</h2>
<p>Headers：</p>
<pre><code>Access-Control-Allow-Origin: http://static.udache.com
Access-Control-Allow-Credentials: true </code></pre>
<p>如下截图：</p>

<img src="./img/cookie-1.png">

<img src="./img/cookie-2.png">

<img src="./img/cookie-3.jpg">



</body>
</html>
<script type="text/javascript" src="/docs/markdown_res/js/footer.js"></script>
<script type="text/javascript" src="/docs/markdown_res/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/docs/markdown_res/js/scrollspy.js"></script>
